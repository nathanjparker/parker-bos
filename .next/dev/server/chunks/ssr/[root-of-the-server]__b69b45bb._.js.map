{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/NathanParker/SynologyDrive/parker-bos/src/lib/firebase.ts"],"sourcesContent":["// Firebase *client* initialization (Auth/Firestore/Storage).\r\n// Intended for usage from Client Components only.\r\n\"use client\";\r\n\r\nimport { type FirebaseApp, type FirebaseOptions, getApps, initializeApp } from \"firebase/app\";\r\nimport { type Analytics, getAnalytics, isSupported } from \"firebase/analytics\";\r\nimport { type Auth, getAuth } from \"firebase/auth\";\r\nimport { type Firestore, getFirestore } from \"firebase/firestore\";\r\nimport { type FirebaseStorage, getStorage } from \"firebase/storage\";\r\n\r\nconst firebaseConfig: FirebaseOptions = {\r\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\r\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\r\n  measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID,\r\n};\r\n\r\nfunction missingFirebaseEnvVars(): string[] {\r\n  const missing: string[] = [];\r\n  if (!firebaseConfig.apiKey) missing.push(\"NEXT_PUBLIC_FIREBASE_API_KEY\");\r\n  if (!firebaseConfig.authDomain) missing.push(\"NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN\");\r\n  if (!firebaseConfig.projectId) missing.push(\"NEXT_PUBLIC_FIREBASE_PROJECT_ID\");\r\n  if (!firebaseConfig.appId) missing.push(\"NEXT_PUBLIC_FIREBASE_APP_ID\");\r\n  // These aren’t required for Auth, but are needed for other products:\r\n  if (!firebaseConfig.storageBucket) missing.push(\"NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET\");\r\n  if (!firebaseConfig.messagingSenderId) missing.push(\"NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID\");\r\n  return missing;\r\n}\r\n\r\n/** True if all required env vars are set (Firebase can be initialized). */\r\nexport function isFirebaseConfigured(): boolean {\r\n  return missingFirebaseEnvVars().length === 0;\r\n}\r\n\r\nfunction initFirebaseApp(): FirebaseApp {\r\n  const missing = missingFirebaseEnvVars();\r\n  if (missing.length) {\r\n    throw new Error(`Firebase is not configured. Missing: ${missing.join(\", \")}`);\r\n  }\r\n  return getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0]!;\r\n}\r\n\r\n// --- Canonical instances (no tenant / custom-domain configuration) ---\r\nexport const app: FirebaseApp = initFirebaseApp();\r\n\r\n// Per your requirement: getAuth(app)\r\nexport const auth: Auth = getAuth(app);\r\nexport const db: Firestore = getFirestore(app);\r\nexport const storage: FirebaseStorage = getStorage(app);\r\n\r\nexport function getFirebaseApp(): FirebaseApp {\r\n  return app;\r\n}\r\n\r\nexport function getFirebaseAuth(): Auth {\r\n  return auth;\r\n}\r\n\r\nexport function getFirestoreDb(): Firestore {\r\n  return db;\r\n}\r\n\r\nexport function getFirebaseStorage(): FirebaseStorage {\r\n  return storage;\r\n}\r\n\r\n/**\r\n * Analytics is optional and only works in the browser (and not all environments).\r\n * Call this from a Client Component effect (e.g. useEffect) when you actually need analytics.\r\n */\r\nexport async function getFirebaseAnalytics(): Promise<Analytics | undefined> {\r\n  if (typeof window === \"undefined\") return undefined;\r\n  return (await isSupported()) ? getAnalytics(app) : undefined;\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAIA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AARA,6DAA6D;AAC7D,kDAAkD;AAClD;;;;;;AAQA,MAAM,iBAAkC;IACtC,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;IACL,aAAa;AACf;AAEA,SAAS;IACP,MAAM,UAAoB,EAAE;IAC5B,IAAI,CAAC,eAAe,MAAM,EAAE,QAAQ,IAAI,CAAC;IACzC,IAAI,CAAC,eAAe,UAAU,EAAE,QAAQ,IAAI,CAAC;IAC7C,IAAI,CAAC,eAAe,SAAS,EAAE,QAAQ,IAAI,CAAC;IAC5C,IAAI,CAAC,eAAe,KAAK,EAAE,QAAQ,IAAI,CAAC;IACxC,qEAAqE;IACrE,IAAI,CAAC,eAAe,aAAa,EAAE,QAAQ,IAAI,CAAC;IAChD,IAAI,CAAC,eAAe,iBAAiB,EAAE,QAAQ,IAAI,CAAC;IACpD,OAAO;AACT;AAGO,SAAS;IACd,OAAO,yBAAyB,MAAM,KAAK;AAC7C;AAEA,SAAS;IACP,MAAM,UAAU;IAChB,IAAI,QAAQ,MAAM,EAAE;QAClB,MAAM,IAAI,MAAM,CAAC,qCAAqC,EAAE,QAAQ,IAAI,CAAC,OAAO;IAC9E;IACA,OAAO,IAAA,0OAAO,IAAG,MAAM,KAAK,IAAI,IAAA,gPAAa,EAAC,kBAAkB,IAAA,0OAAO,GAAE,CAAC,EAAE;AAC9E;AAGO,MAAM,MAAmB;AAGzB,MAAM,OAAa,IAAA,iRAAO,EAAC;AAC3B,MAAM,KAAgB,IAAA,0RAAY,EAAC;AACnC,MAAM,UAA2B,IAAA,ySAAU,EAAC;AAE5C,SAAS;IACd,OAAO;AACT;AAEO,SAAS;IACd,OAAO;AACT;AAEO,SAAS;IACd,OAAO;AACT;AAEO,SAAS;IACd,OAAO;AACT;AAMO,eAAe;IACpB,wCAAmC,OAAO;;;AAE5C"}},
    {"offset": {"line": 212, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/NathanParker/SynologyDrive/parker-bos/src/app/login/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { FormEvent, useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport {\n  GoogleAuthProvider,\n  onAuthStateChanged,\n  signInWithEmailAndPassword,\n  signInWithPopup,\n  type AuthError,\n} from \"firebase/auth\";\nimport { auth } from \"@/lib/firebase\";\n\nexport default function LoginPage() {\n  const router = useRouter();\n  const [checking, setChecking] = useState(true);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [emailSigningIn, setEmailSigningIn] = useState(false);\n  const [googleSigningIn, setGoogleSigningIn] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const unsub = onAuthStateChanged(auth, (user) => {\n      if (user) router.replace(\"/dashboard\");\n      else setChecking(false);\n    });\n\n    return () => unsub();\n  }, [router]);\n\n  async function handleEmailSignIn(e: FormEvent) {\n    e.preventDefault();\n    setError(null);\n    setEmailSigningIn(true);\n    try {\n      await signInWithEmailAndPassword(auth, email.trim(), password);\n      router.replace(\"/dashboard\");\n    } catch (err) {\n      const e = err as Partial<AuthError> | undefined;\n      switch (e?.code) {\n        case \"auth/user-not-found\":\n        case \"auth/wrong-password\":\n          setError(\"Invalid email or password. This page is for existing admin accounts only.\");\n          break;\n        case \"auth/too-many-requests\":\n          setError(\"Too many failed attempts. Try again later or use a different account.\");\n          break;\n        default:\n          setError(\"Email sign-in failed. Check your credentials and try again.\");\n      }\n    } finally {\n      setEmailSigningIn(false);\n    }\n  }\n\n  async function handleGoogleSignIn() {\n    setError(null);\n    setGoogleSigningIn(true);\n    try {\n      const provider = new GoogleAuthProvider();\n      provider.setCustomParameters({ prompt: \"select_account\" });\n      await signInWithPopup(auth, provider);\n      router.replace(\"/dashboard\");\n    } catch (err) {\n      const e = err as Partial<AuthError> | undefined;\n      if (e?.code === \"auth/popup-closed-by-user\") {\n        setError(\"Google sign-in was cancelled before it completed.\");\n      } else if (e?.code === \"auth/popup-blocked\") {\n        setError(\n          \"Your browser blocked the Google sign-in popup. Allow popups for this site, or use email and password below.\"\n        );\n      } else if (e?.code) {\n        setError(`Google sign-in failed (${e.code}). Try again or use email/password instead.`);\n      } else {\n        setError(\"Google sign-in failed. Try again or use email/password instead.\");\n      }\n    } finally {\n      setGoogleSigningIn(false);\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex items-center justify-center px-4\">\n      <main className=\"w-full max-w-md rounded-2xl bg-white shadow-lg border border-gray-100 px-8 py-10\">\n        <div className=\"text-center\">\n          <div className=\"mx-auto mb-4 flex h-14 w-14 items-center justify-center rounded-2xl bg-blue-600 text-white font-bold text-lg\">\n            PB\n          </div>\n          <p className=\"text-xs font-semibold tracking-[0.25em] text-blue-600 uppercase\">\n            Parker Services\n          </p>\n          <h1 className=\"mt-2 text-3xl font-bold text-gray-900\">Parker BOS</h1>\n          <p className=\"mt-2 text-sm text-gray-600\">\n            Sign in to access the dashboard.\n          </p>\n        </div>\n\n        <div className=\"mt-8 space-y-4\">\n          <button\n            type=\"button\"\n            onClick={handleGoogleSignIn}\n            disabled={checking || googleSigningIn}\n            className=\"w-full inline-flex items-center justify-center gap-3 rounded-xl border border-gray-300 bg-white px-4 py-3 text-sm font-semibold text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-60 disabled:cursor-not-allowed focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2\"\n          >\n            <svg\n              aria-hidden=\"true\"\n              viewBox=\"0 0 48 48\"\n              className=\"h-5 w-5\"\n            >\n              <path\n                fill=\"#EA4335\"\n                d=\"M24 9.5c3.54 0 6.1 1.53 7.5 2.8l5.5-5.5C33.77 3.65 29.3 1.5 24 1.5 14.8 1.5 6.91 6.97 3.26 14.92l6.77 5.26C11.7 13.55 17.3 9.5 24 9.5z\"\n              />\n              <path\n                fill=\"#4285F4\"\n                d=\"M46.5 24.5c0-1.57-.14-2.77-.44-4.02H24v7.6h12.9c-.26 2.05-1.66 5.14-4.77 7.22l7.3 5.64c4.26-3.93 6.77-9.72 6.77-16.44z\"\n              />\n              <path\n                fill=\"#FBBC05\"\n                d=\"M10.03 28.18c-.44-1.3-.7-2.7-.7-4.18s.26-2.88.68-4.18l-6.77-5.26C1.94 17.08 1.5 20.47 1.5 24s.44 6.92 1.74 9.62l6.79-5.44z\"\n              />\n              <path\n                fill=\"#34A853\"\n                d=\"M24 46.5c5.3 0 9.77-1.75 13.03-4.76l-7.3-5.64c-1.95 1.37-4.58 2.33-5.73 2.33-6.69 0-12.3-4.05-13.97-9.68l-6.79 5.44C6.91 41.03 14.8 46.5 24 46.5z\"\n              />\n              <path fill=\"none\" d=\"M1.5 1.5h45v45h-45z\" />\n            </svg>\n            {googleSigningIn ? \"Signing in with Google…\" : \"Continue with Google\"}\n          </button>\n\n          {error ? (\n            <div className=\"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700\">\n              {error}\n            </div>\n          ) : null}\n\n          <div className=\"flex items-center gap-3 text-xs text-gray-400\">\n            <div className=\"h-px flex-1 bg-gray-200\" />\n            <span>Or sign in with email</span>\n            <div className=\"h-px flex-1 bg-gray-200\" />\n          </div>\n\n          <form onSubmit={handleEmailSignIn} className=\"space-y-4\">\n            <div className=\"space-y-1\">\n              <label className=\"block text-xs font-medium text-gray-700\">\n                Email\n              </label>\n              <input\n                type=\"email\"\n                required\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                className=\"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                autoComplete=\"email\"\n              />\n            </div>\n\n            <div className=\"space-y-1\">\n              <label className=\"block text-xs font-medium text-gray-700\">\n                Password\n              </label>\n              <input\n                type=\"password\"\n                required\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                className=\"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                autoComplete=\"current-password\"\n              />\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={checking || emailSigningIn}\n              className=\"mt-2 w-full inline-flex items-center justify-center rounded-xl bg-blue-600 px-4 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 disabled:opacity-60 disabled:cursor-not-allowed focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2\"\n            >\n              {emailSigningIn ? \"Signing in…\" : \"Sign in\"}\n            </button>\n          </form>\n\n          <p className=\"text-[11px] text-gray-400\">\n            This login is for existing Parker BOS admin accounts only. New accounts are created in\n            Firebase Console.\n          </p>\n        </div>\n      </main>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAOA;AAXA;;;;;;AAae,SAAS;IACtB,MAAM,SAAS,IAAA,8PAAS;IACxB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,gUAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gUAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,gUAAQ,EAAC;IACzC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,gUAAQ,EAAC;IACrD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,gUAAQ,EAAC;IACvD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,gUAAQ,EAAgB;IAElD,IAAA,iUAAS,EAAC;QACR,MAAM,QAAQ,IAAA,4RAAkB,EAAC,8HAAI,EAAE,CAAC;YACtC,IAAI,MAAM,OAAO,OAAO,CAAC;iBACpB,YAAY;QACnB;QAEA,OAAO,IAAM;IACf,GAAG;QAAC;KAAO;IAEX,eAAe,kBAAkB,CAAY;QAC3C,EAAE,cAAc;QAChB,SAAS;QACT,kBAAkB;QAClB,IAAI;YACF,MAAM,IAAA,oSAA0B,EAAC,8HAAI,EAAE,MAAM,IAAI,IAAI;YACrD,OAAO,OAAO,CAAC;QACjB,EAAE,OAAO,KAAK;YACZ,MAAM,IAAI;YACV,OAAQ,GAAG;gBACT,KAAK;gBACL,KAAK;oBACH,SAAS;oBACT;gBACF,KAAK;oBACH,SAAS;oBACT;gBACF;oBACE,SAAS;YACb;QACF,SAAU;YACR,kBAAkB;QACpB;IACF;IAEA,eAAe;QACb,SAAS;QACT,mBAAmB;QACnB,IAAI;YACF,MAAM,WAAW,IAAI,4RAAkB;YACvC,SAAS,mBAAmB,CAAC;gBAAE,QAAQ;YAAiB;YACxD,MAAM,IAAA,yRAAe,EAAC,8HAAI,EAAE;YAC5B,OAAO,OAAO,CAAC;QACjB,EAAE,OAAO,KAAK;YACZ,MAAM,IAAI;YACV,IAAI,GAAG,SAAS,6BAA6B;gBAC3C,SAAS;YACX,OAAO,IAAI,GAAG,SAAS,sBAAsB;gBAC3C,SACE;YAEJ,OAAO,IAAI,GAAG,MAAM;gBAClB,SAAS,CAAC,uBAAuB,EAAE,EAAE,IAAI,CAAC,2CAA2C,CAAC;YACxF,OAAO;gBACL,SAAS;YACX;QACF,SAAU;YACR,mBAAmB;QACrB;IACF;IAEA,qBACE,6VAAC;QAAI,WAAU;kBACb,cAAA,6VAAC;YAAK,WAAU;;8BACd,6VAAC;oBAAI,WAAU;;sCACb,6VAAC;4BAAI,WAAU;sCAA+G;;;;;;sCAG9H,6VAAC;4BAAE,WAAU;sCAAkE;;;;;;sCAG/E,6VAAC;4BAAG,WAAU;sCAAwC;;;;;;sCACtD,6VAAC;4BAAE,WAAU;sCAA6B;;;;;;;;;;;;8BAK5C,6VAAC;oBAAI,WAAU;;sCACb,6VAAC;4BACC,MAAK;4BACL,SAAS;4BACT,UAAU,YAAY;4BACtB,WAAU;;8CAEV,6VAAC;oCACC,eAAY;oCACZ,SAAQ;oCACR,WAAU;;sDAEV,6VAAC;4CACC,MAAK;4CACL,GAAE;;;;;;sDAEJ,6VAAC;4CACC,MAAK;4CACL,GAAE;;;;;;sDAEJ,6VAAC;4CACC,MAAK;4CACL,GAAE;;;;;;sDAEJ,6VAAC;4CACC,MAAK;4CACL,GAAE;;;;;;sDAEJ,6VAAC;4CAAK,MAAK;4CAAO,GAAE;;;;;;;;;;;;gCAErB,kBAAkB,4BAA4B;;;;;;;wBAGhD,sBACC,6VAAC;4BAAI,WAAU;sCACZ;;;;;mCAED;sCAEJ,6VAAC;4BAAI,WAAU;;8CACb,6VAAC;oCAAI,WAAU;;;;;;8CACf,6VAAC;8CAAK;;;;;;8CACN,6VAAC;oCAAI,WAAU;;;;;;;;;;;;sCAGjB,6VAAC;4BAAK,UAAU;4BAAmB,WAAU;;8CAC3C,6VAAC;oCAAI,WAAU;;sDACb,6VAAC;4CAAM,WAAU;sDAA0C;;;;;;sDAG3D,6VAAC;4CACC,MAAK;4CACL,QAAQ;4CACR,OAAO;4CACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;4CACxC,WAAU;4CACV,cAAa;;;;;;;;;;;;8CAIjB,6VAAC;oCAAI,WAAU;;sDACb,6VAAC;4CAAM,WAAU;sDAA0C;;;;;;sDAG3D,6VAAC;4CACC,MAAK;4CACL,QAAQ;4CACR,OAAO;4CACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;4CAC3C,WAAU;4CACV,cAAa;;;;;;;;;;;;8CAIjB,6VAAC;oCACC,MAAK;oCACL,UAAU,YAAY;oCACtB,WAAU;8CAET,iBAAiB,gBAAgB;;;;;;;;;;;;sCAItC,6VAAC;4BAAE,WAAU;sCAA4B;;;;;;;;;;;;;;;;;;;;;;;AAQnD"}}]
}